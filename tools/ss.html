<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Shadowsocks QRCode</title>
    <style media="screen">
    body {TEXT-ALIGN: center;}
    div { MARGIN-RIGHT: auto; MARGIN-LEFT: auto; }
    </style>

    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.1.min.js"></script>
    <script type="text/javascript" src="base64.js" ></script>
    <script type="text/javascript" src="jquery.qrcode.min.js"></script>
  </head>
  <body>
    <div>
      <p><a href='https://www.mianvpn.com/'>源</a>Shadowsocks试用账号密码6小时变更一次，特制作此页面自动获取最新配置并生成二维码方便使用</p>
      <p class="">推荐Shadowsocks客户端Wingy，扫码自动连接,iOS、Android通用</p>
      <p>Window官方客户端下载<a href="https://github.com/shadowsocks/shadowsocks-csharp/releases">下载</a></p>，也可扫屏幕上的二维码哦
      <div id='ss0'>
        <p></p>
        <div id="code0"></div>
      </div>
      <div id='ss1'>
        <p></p>
        <div id="code1"></div>
      </div>
      <div id='ss2'>
        <p></p>
        <div id="code2"></div>
      </div>
    </div>

    <script type="text/javascript">
    function getQRCode(account,index){
    //  console.log(base64encode(account));
      var enCodeStr="ss://"+base64encode(account);
      $("#code"+index).qrcode(enCodeStr);
    }

      var htmlStr="";
    $.getJSON("https://api.mianvpn.com/ajax.php?verify=true&mod=getfreess", function(data){
      for (var j = 0; j < data.length; j++) {
        var ss= data[j];
      //  console.log(ss);
        var location=ss.r;
        var ip=ss.i;
        var port=ss.p;
        var pwd=ss.pw;
        var method=ss.m;
        var info=JSON.parse(ss.l);
      //  console.log(info);
        var account=method+":"+pwd+"@"+ip+":"+port;
        var img="";
        var htmlStr="<div class='"+ip+"'><p>"+location+"    负载:"+info.netspeed+"</p><div>";
        $("#ss"+j).find('p').html(htmlStr);
      //  console.log(account);
        getQRCode(account,j);
      }
});

//ss://cmM0LW1kNToyMjkyQDQ3Ljg5LjkuMjAxOnVuZGVmaW5lZA==

    </script>
  </body>
</html>
